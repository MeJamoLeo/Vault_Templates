```lisp
(let ((product 1))
  (loop with n = 3
        repeat n
        for a = (read)
        do (setf product (* product a))
        finally (format t "~A~%" product)))
```

**1. ループ関連のキーワード（`loop` マクロ内の節）**

- **初期化・定数宣言に関する節**
    
    - **`with`**  
        → ループ内で使う局所変数の初期化・束縛に用いる
- **反復回数・繰り返し制御に関する節**
    
    - **`repeat`**  
        → ループを指定回数だけ反復させるために使う
    - **`for`**  
        → 変数を順次値に束縛して、反復処理の対象とする
- **ループ本体の処理に関する節**
    
    - **`do`**  
        → 各反復ごとに実行される処理（副作用など）を記述する
- **ループ終了時の後処理に関する節**
    
    - **`finally`**  
        → 反復処理が終了した後に実行される処理を記述する

---

**2. ループの外部・全体を囲む構造**

- **`loop`**  
    → 上記の節（with、repeat、for、do、finally など）をまとめた反復処理のマクロそのもの
    
- **`let`**  
    → ループとは直接関係ないが、局所変数の束縛を行うための特殊形式  
    → ループの外側や内側で、環境を整えるために用いる
    

---

このように、

- **`loop`** マクロの中では、
    - **初期化系:** `with`
    - **反復制御系:** `repeat`、`for`
    - **本体処理:** `do`
    - **後処理:** `finally`  
        が使われ、
- **`let`** はループの外または内で変数を束縛するために使われる特殊形式、という役割分担になります。
